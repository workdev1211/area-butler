.map-menu {
  overflow-y: auto;
  top: 0;
  right: 0;
  bottom: 0;
  width: 0;
  transition: width 0.2s;
  z-index: 1000;
  --menu-item-pt: 18px;
  --menu-item-pr: 60px;
  --menu-item-pb: 20px;
  --menu-item-pl: 24px;
  --menu-item-h: 56px;
  --menu-footer-h: 88px;
  --menu-image-w-h: 36px;
  @apply absolute;

  &.map-menu-open {
    width: var(--mobile-map-menu-width);
  }

  .tab-bar {
    height: 112px;
    color: var(--primary);
    padding: calc(var(--menu-item-pl) / 2) 0 calc(var(--menu-item-pl) / 2)
      var(--menu-item-pl);
    @apply text-base font-medium;

    .tab-container {
      padding: 0.5rem calc(2.5rem + 24px) 0.5rem 2.5rem;
      border: 0.25rem solid transparent;
      border-radius: 1rem 0 0 1rem;
      background: white;
      @apply flex gap-10;
    }

    .tab-item {
      height: 67px;
      border-radius: 0.75rem;
      background: lightgrey;
      color: black;
      @apply flex flex-1 flex-col items-center cursor-pointer justify-center gap-1;

      &.tab-item-active {
        color: white;
        background: var(--primary-gradient);

        img {
          filter: invert(100%);
        }
      }
    }

    img {
      width: var(--menu-image-w-h);
      height: var(--menu-image-w-h);
    }
  }

  .map-menu-header {
    height: var(--menu-item-h);
    background: var(--base-anthracite);
    padding: 0 var(--menu-item-pr) 0 var(--menu-item-pl) !important;
    border-bottom: none;
    @apply flex flex-col justify-center;

    .map-menu-header-text {
      @apply text-lg;
    }

    .btn-link {
      padding: 0 !important;
      height: auto !important;
      @apply w-auto justify-start text-white flex flex-nowrap;
    }
  }

  .map-menu-content {
    color: var(--base-anthracite);
    overflow-y: scroll;
    z-index: 1000;
    @apply h-full flex flex-col bg-white;

    .collapse-title {
      color: var(--base-anthracite);
      padding: 0 var(--menu-item-pr) 0 var(--menu-item-pl);
      background: white !important;
      @apply flex text-lg font-medium cursor-pointer items-center;

      .collapse-title-container {
        @apply flex gap-3 items-center;

        img {
          width: var(--menu-image-w-h);
          @apply invert-0;
        }

        .collapse-title-text {
          @apply flex flex-col;

          .collapse-title-text-1 {
            @apply font-bold;
          }

          .collapse-title-text-2 {
            @apply text-base text-justify text-gray-500 italic;
          }
        }
      }
    }

    input[type="checkbox"] {
      cursor: pointer;
    }

    .view-option {
      overflow: initial;

      .collapse-title {
        height: var(--menu-item-h);
        line-height: 18px;

        &:after {
          top: 22px;
          right: calc(var(--menu-item-pr) / 2);
        }
      }

      &.collapse-open > .collapse-title {
        color: white;

        .collapse-title-container {
          img {
            @apply invert;
          }

          .collapse-title-text {
            .collapse-title-text-2 {
              @apply text-gray-300;
            }
          }
        }
      }

      & > .collapse-content {
        background: white !important;
        padding: 0 !important;
        margin: 0 !important;
        max-height: 100% !important;
        overflow-y: hidden;
      }

      &.collapse-closed > .collapse-content {
        max-height: 0 !important;
        height: 0;
      }

      .collapse-open > .collapse-content {
        min-height: 40px;
      }

      .collapse-content {
        ul {
          @apply w-full flex flex-col;

          li {
            padding: 4px var(--menu-item-pr) 4px var(--menu-item-pl);
            border-bottom: 1px solid var(--base-bright-silver);
            @apply w-full flex justify-between items-center;

            & > span {
              color: var(--base-anthracite);
              @apply font-medium text-lg;
            }
          }
        }
      }
    }

    .locality-option-li {
      padding: 0 !important;

      & > .collapse-child-closed .collapse-content {
        max-height: 0;
        height: 0;
      }

      .collapse-child-closed .collapse-title:after {
        transform: rotate(405deg) !important;
      }

      .collapse-child-open {
        .collapse-title:after {
          top: 24px;
        }

        .collapse-content {
          max-height: 9000px;
        }
      }
    }

    .locality-option {
      @apply w-full;

      .collapse-title {
        border-bottom: 1px solid var(--base-bright-silver);
        @apply flex justify-between items-center;

        & > div {
          @apply flex items-center gap-2;
        }

        div.img-container {
          width: var(--menu-image-w-h);
          height: var(--menu-image-w-h);

          img.item {
            filter: brightness(0) invert(1);
          }

          img.item-custom {
            @apply max-w-full max-h-full;
          }
        }

        .checkbox {
          z-index: 99;
        }
      }

      .collapse-content {
        padding: 0 !important;
        overflow-y: hidden;
      }

      &.collapse-child-open .collapse-content {
        background: white !important;
        padding: 0;
      }

      .mean-items {
        border-bottom: 2px solid var(--base-bright-silver);
        padding: 10px var(--menu-item-pr) 10px var(--menu-item-pl) !important;
        @apply flex;

        .item {
          width: 120px;
          border-right: 1px solid var(--base-bright-silver);
          @apply flex items-center gap-2 text-tiny font-medium pl-6;
          &:first-of-type {
            @apply pl-0;
          }

          img {
            height: 20px;
            width: 20px;
            @apply pr-1;
          }
        }
      }
    }

    .checkbox-white {
      border-color: white;

      &:checked {
        background-image: linear-gradient(-45deg, transparent 65%, #ffffff 0),
          linear-gradient(45deg, transparent 75%, #ffffff 0),
          linear-gradient(-45deg, #ffffff 40%, transparent 0),
          linear-gradient(
            44deg,
            #ffffff 30%,
            var(--primary) 0,
            var(--primary) 40%,
            transparent 0
          ),
          linear-gradient(-45deg, var(--primary) 50%, #ffffff 0);
      }
    }

    .checkbox-custom {
      border-color: var(--custom-primary) !important;

      &:checked {
        background-image: linear-gradient(
            -45deg,
            transparent 65%,
            var(--custom-primary) 0
          ),
          linear-gradient(45deg, transparent 75%, var(--custom-primary) 0),
          linear-gradient(-45deg, var(--custom-primary) 40%, transparent 0),
          linear-gradient(
            44deg,
            var(--custom-primary) 30%,
            #ffffff 0,
            #ffffff 40%,
            transparent 0
          ),
          linear-gradient(-45deg, #ffffff 50%, var(--custom-primary) 0) !important;
      }
    }
  }

  .map-menu-footer {
    height: var(--menu-footer-h);
    padding: 4px var(--menu-item-pl) 2px var(--menu-item-pl);
    border-top: 2px solid var(--primary);
    background: white;
    @apply flex flex-col gap-1;

    .button-container {
      @apply flex items-center justify-between gap-10;

      .back-button {
        @apply m-0 w-auto;
      }

      .feedback-button {
        all: unset;
        border: 1px solid;
        @apply btn-sm border-primary rounded-full font-bold bg-white text-primary hover:bg-primary hover:text-white;
      }

      .save-button {
        width: var(--btn-height) !important;
        height: var(--btn-height) !important;
        background: var(--primary-gradient);
        @apply btn p-0;

        img {
          width: 2rem;
          height: 2rem;
          @apply invert;
        }
      }
    }
  }
}

@media (min-width: 1024px) {
  .map-menu.map-menu-open {
    width: var(--map-menu-width);
  }
}
